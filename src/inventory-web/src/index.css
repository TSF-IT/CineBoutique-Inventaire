@import "tailwindcss";
@config "../tailwind.config.js";
@source "../index.html";
@source "./**/*.{ts,tsx}";
@theme {
  /* Reprends ici tes tokens (ex: --color-brand-500, etc.) et
     ajoute:  --shadow-soft: 0 10px 30px -15px rgba(15,23,42,.35);  */
  --color-brand-50: #eef2ff;
  --color-brand-100: #e0e7ff;
  --color-brand-200: #c7d2fe;
  --color-brand-300: #a5b4fc;
  --color-brand-400: #818cf8;
  --color-brand-500: #6366f1;
  --color-brand-600: #4f46e5;
  --color-brand-700: #4338ca;
  --color-brand-800: #3730a3;
  --color-brand-900: #312e81;
  --shadow-soft: 0 10px 30px -15px rgba(15, 23, 42, 0.35);
}
@layer responsive-styles {
  @import './app/styles/responsive.css';
}

html {
  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

:root {
  color-scheme: light;
  --surface: #fff;
  --surface-muted: #f6f8fb;
  --text-strong: #121826;
  --text-muted: #5b6471;
  --stroke: #e7eaf0;
  --cb-background: #f4f7ff;
  --cb-background-gradient: radial-gradient(140% 100% at 0% 0%, rgba(129, 140, 248, 0.18), transparent 55%),
    radial-gradient(120% 120% at 80% 0%, rgba(45, 212, 191, 0.14), transparent 55%),
    #f4f7ff;
  --cb-text: var(--text-strong);
  --cb-muted: var(--text-muted);
  --cb-surface: var(--surface);
  --cb-surface-strong: var(--surface);
  --cb-surface-soft: var(--surface-muted);
  --cb-border: var(--stroke);
  --cb-border-strong: var(--stroke);
  --cb-card-shadow: 0 40px 90px -45px rgba(15, 23, 42, 0.38);
  --cb-card-shadow-soft: 0 28px 80px -55px rgba(15, 23, 42, 0.3);
  --cb-backdrop: rgba(15, 23, 42, 0.4);
  --focus-ring-border: rgba(99, 102, 241, 0.65);
  --focus-ring-shadow: 0 16px 40px -20px rgba(99, 102, 241, 0.35), 0 0 0 3px rgba(99, 102, 241, 0.45);
  --cb-toggle-track-light: linear-gradient(135deg, rgba(129, 140, 248, 0.35), rgba(99, 102, 241, 0.55));
  --cb-toggle-track-dark: linear-gradient(135deg, rgba(30, 64, 175, 0.35), rgba(30, 41, 59, 0.6));
  --cb-toggle-knob-light: linear-gradient(135deg, #ffffff, rgba(224, 231, 255, 0.95));
  --cb-toggle-knob-dark: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.9));
}

:root[data-theme='dark'],
:root.dark {
  color-scheme: dark;
  --surface: #0e1420;
  --surface-muted: #121b2b;
  --text-strong: #f5f7fa;
  --text-muted: #aeb8c7;
  --stroke: #1e2a3c;
  --cb-background: #050816;
  --cb-background-gradient: radial-gradient(130% 120% at 0% 0%, rgba(99, 102, 241, 0.32), transparent 55%),
    radial-gradient(120% 100% at 100% 0%, rgba(20, 184, 166, 0.22), transparent 60%),
    linear-gradient(180deg, #050816 0%, #0b1223 100%);
  --cb-text: var(--text-strong);
  --cb-muted: var(--text-muted);
  --cb-surface: var(--surface);
  --cb-surface-strong: var(--surface);
  --cb-surface-soft: var(--surface-muted);
  --cb-border: var(--stroke);
  --cb-border-strong: var(--stroke);
  --cb-card-shadow: 0 40px 90px -40px rgba(2, 6, 23, 0.75);
  --cb-card-shadow-soft: 0 32px 90px -55px rgba(15, 23, 42, 0.7);
  --cb-backdrop: rgba(2, 6, 23, 0.7);
  --focus-ring-border: rgba(165, 180, 252, 0.75);
  --focus-ring-shadow: 0 18px 44px -20px rgba(129, 140, 248, 0.5), 0 0 0 3px rgba(129, 140, 248, 0.55);
  --cb-toggle-track-light: linear-gradient(135deg, rgba(59, 130, 246, 0.35), rgba(30, 64, 175, 0.55));
  --cb-toggle-track-dark: linear-gradient(135deg, rgba(15, 23, 42, 0.82), rgba(15, 23, 42, 0.96));
  --cb-toggle-knob-light: linear-gradient(135deg, rgba(148, 163, 184, 0.4), rgba(191, 219, 254, 0.6));
  --cb-toggle-knob-dark: linear-gradient(135deg, rgba(30, 41, 59, 0.92), rgba(51, 65, 85, 0.85));
}

body {
  margin: 0;
  min-height: 100dvh;
  background-color: var(--cb-background);
  background-image: var(--cb-background-gradient);
  background-attachment: fixed;
  background-size: cover;
  background-repeat: no-repeat;
  color: var(--cb-text);
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  transition: background-color 250ms ease, color 250ms ease, background-image 350ms ease;
}

body.theme-dark,
body.theme-light {
  color: var(--cb-text);
}

/* Supprime le halo bleu/gris au tap sur iOS / mobiles */
.tap-highlight-none {
  -webkit-tap-highlight-color: transparent;
}

/* Par sécurité, pas d'outline par défaut sur ces boutons spécifiques */
.no-focus-ring:focus,
.no-focus-ring:focus-visible {
  outline: none;
}

/* Centre strictement les glyphes +/- dans les boutons circulaires */
.btn-glyph-center {
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

dialog {
  border: none;
  padding: 0;
  background: transparent;
  color: inherit;
}

dialog[open] {
  position: fixed;
  inset: 0;
  margin: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  max-height: 100dvh;
}

dialog::backdrop {
  background: var(--cb-backdrop);
  backdrop-filter: blur(6px);
}

.shadow-wrap {
  position: relative;
  overflow: visible;
}

@layer components {
  .cb-surface-panel {
    border-radius: 2.25rem;
    background: var(--cb-surface);
    color: var(--cb-text);
    border: 1px solid var(--cb-border);
    box-shadow: var(--cb-card-shadow);
    -webkit-backdrop-filter: blur(20px);
    backdrop-filter: blur(20px);
  }

  .cb-text-muted {
    color: var(--cb-muted);
  }
}
body.inventory-flash-active::after {
  content: '';
  position: fixed;
  inset: 0;
  background: rgba(239, 68, 68, 0.22);
  pointer-events: none;
  animation: inventory-flash-pulse 720ms ease-in-out 1;
  z-index: 2147483647;
}

@keyframes inventory-flash-pulse {
  0% {
    opacity: 0;
  }
  10% {
    opacity: 0.65;
  }
  25% {
    opacity: 0;
  }
  45% {
    opacity: 0.55;
  }
  60% {
    opacity: 0;
  }
  80% {
    opacity: 0.4;
  }
  100% {
    opacity: 0;
  }
}
